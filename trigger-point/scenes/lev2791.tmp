[gd_scene load_steps=20 format=3 uid="uid://b7q1eno5y5die"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_n4l56"]
[ext_resource type="Material" uid="uid://caifagdwplekp" path="res://materials/light_glow_material.tres" id="1_ul5kl"]
[ext_resource type="Material" uid="uid://cwf16nuwia0pi" path="res://materials/light_off_material.tres" id="2_5vhkd"]
[ext_resource type="PackedScene" uid="uid://5t6fyl18fw6r" path="res://scenes/enemy.tscn" id="4_hgh7a"]
[ext_resource type="PackedScene" uid="uid://dqeky53dj2eb4" path="res://scenes/shotgun_basic.tscn" id="4_u86ou"]

[sub_resource type="BoxShape3D" id="BoxShape3D_6bif5"]
size = Vector3(0.397217, 0.400635, 0.555557)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fhc4a"]
albedo_color = Color(0.377919, 0.377919, 0.377919, 1)

[sub_resource type="BoxMesh" id="BoxMesh_2s6tp"]
material = SubResource("StandardMaterial3D_fhc4a")
flip_faces = true
size = Vector3(10, 3.5, 8)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_e4r8r"]
albedo_color = Color(0.33363, 0.186561, 0.0174108, 1)

[sub_resource type="BoxMesh" id="BoxMesh_b6db7"]
material = SubResource("StandardMaterial3D_e4r8r")

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_x3wjk"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y5ny2"]
albedo_color = Color(0.695503, 0.695503, 0.695503, 1)

[sub_resource type="BoxMesh" id="BoxMesh_eanyj"]
material = SubResource("StandardMaterial3D_y5ny2")
size = Vector3(0.4, 1, 1.25)

[sub_resource type="BoxMesh" id="BoxMesh_cdjr3"]
material = ExtResource("1_ul5kl")
size = Vector3(0.1, 0.1, 4.1)

[sub_resource type="BoxMesh" id="BoxMesh_dy2m4"]
material = ExtResource("2_5vhkd")
size = Vector3(0.1, 0.1, 4.1)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_qt43v"]

[sub_resource type="Sky" id="Sky_c3pm3"]
sky_material = SubResource("ProceduralSkyMaterial_qt43v")

[sub_resource type="Environment" id="Environment_c2ie3"]
background_mode = 2
background_energy_multiplier = 0.7
sky = SubResource("Sky_c3pm3")
ssr_enabled = true
glow_enabled = true
glow_strength = 1.5
glow_bloom = 0.11
fog_light_color = Color(0.458087, 0.492626, 0.546909, 1)
fog_light_energy = 0.53
fog_density = 0.0247
volumetric_fog_enabled = true
volumetric_fog_density = 0.08

[sub_resource type="LabelSettings" id="LabelSettings_iww2h"]
font_size = 10

[node name="level" type="Node3D"]

[node name="Buttons" type="Node3D" parent="."]

[node name="Self" type="StaticBody3D" parent="Buttons" groups=["player_button"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.713442, -0.500362, 0)

[node name="ShootYourselfLabel" type="Label3D" parent="Buttons/Self"]
transform = Transform3D(-4.37114e-08, -1, -4.37114e-08, 0, -4.37114e-08, 1, -1, 4.37114e-08, 1.91069e-15, 0, 0, 0)
modulate = Color(0.678431, 0.678431, 0.678431, 1)
text = "Shoot 
Yourself"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Buttons/Self"]
shape = SubResource("BoxShape3D_6bif5")

[node name="Enemy" type="StaticBody3D" parent="Buttons" groups=["enemy_button"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.28778, -0.500362, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Buttons/Enemy"]
shape = SubResource("BoxShape3D_6bif5")

[node name="ShootEnemyLabel" type="Label3D" parent="Buttons/Enemy"]
transform = Transform3D(-4.37114e-08, -1, -4.37114e-08, 0, -4.37114e-08, 1, -1, 4.37114e-08, 1.91069e-15, 0, 0, 0)
modulate = Color(0.678431, 0.678431, 0.678431, 1)
text = "Shoot 
Enemy"

[node name="environment" type="Node3D" parent="."]

[node name="Walls" type="MeshInstance3D" parent="environment"]
mesh = SubResource("BoxMesh_2s6tp")
skeleton = NodePath("../..")

[node name="Table" type="MeshInstance3D" parent="environment"]
transform = Transform3D(3, 0, 0, 0, 0.2, 0, 0, 0, 4, -0.253035, -0.62749, 0)
mesh = SubResource("BoxMesh_b6db7")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="environment/Table"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="environment/Table/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_x3wjk")

[node name="TableLeg1" type="MeshInstance3D" parent="environment"]
transform = Transform3D(0.2, 0, 0, 0, 2, 0, 0, 0, 0.2, 1.14633, -1.62309, -1.87408)
mesh = SubResource("BoxMesh_b6db7")
skeleton = NodePath("../..")

[node name="TableLeg2" type="MeshInstance3D" parent="environment"]
transform = Transform3D(0.2, 0, 0, 0, 2, 0, 0, 0, 0.2, 1.14633, -1.62309, 1.87731)
mesh = SubResource("BoxMesh_b6db7")
skeleton = NodePath("../..")

[node name="Scoreboard" type="MeshInstance3D" parent="environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.334499, 1.60219, 0)
mesh = SubResource("BoxMesh_eanyj")
skeleton = NodePath("../..")

[node name="Label3D" type="Label3D" parent="environment/Scoreboard"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.251728, -0.313023, 0)
text = "0        0"

[node name="player_turn_indicator" type="MeshInstance3D" parent="environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.21661, -0.544179, 0)
mesh = SubResource("BoxMesh_cdjr3")

[node name="enemy_turn_indicator" type="MeshInstance3D" parent="environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.74148, -0.544, 0)
mesh = SubResource("BoxMesh_dy2m4")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_c2ie3")

[node name="SpotLight3D" type="SpotLight3D" parent="WorldEnvironment"]
transform = Transform3D(1, 0, 0, 0, -0.0511507, 0.998691, 0, -0.998691, -0.0511507, -0.322684, 1.62516, -0.00738534)
light_size = 0.505
shadow_enabled = true
shadow_blur = 0.7
distance_fade_begin = 0.0
distance_fade_shadow = 463.74

[node name="player" type="Node3D" parent="." node_paths=PackedStringArray("debug_label_1", "debug_label_2", "debug_label_3", "debug_label_4", "camera", "held_item_pos", "gun_node", "shoot_player_transform", "shoot_enemy_transform", "shoot_player_label", "shoot_enemy_label", "item_pos_1", "item_pos_2", "item_pos_3", "item_pos_4", "live_bullet_pos", "blank_bullet_pos", "player_turn_light", "enemy_turn_light")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.53788, 0.589191, 0)
script = ExtResource("1_n4l56")
debug_label_1 = NodePath("Control/HBoxContainer/VBoxContainer/Label")
debug_label_2 = NodePath("Control/HBoxContainer/VBoxContainer/Label2")
debug_label_3 = NodePath("Control/HBoxContainer/VBoxContainer/Label3")
debug_label_4 = NodePath("Control/HBoxContainer/VBoxContainer/Label4")
camera = NodePath("Camera3D")
rotation_look_up = Vector3(-0.1, 1.571, 0)
rotation_look_down = Vector3(-0.7475, 1.57107, -0.000167499)
camera_lerp_speed = 7
item_lerp_speed = 0.05
held_item_pos = NodePath("HeldItemPos")
gun_node = NodePath("shotgun_basic")
shoot_player_transform = NodePath("ShootPlayerPos")
shoot_enemy_transform = NodePath("ShootEnemyPos")
shoot_player_label = NodePath("../Buttons/Self/ShootYourselfLabel")
shoot_enemy_label = NodePath("../Buttons/Enemy/ShootEnemyLabel")
item_pos_1 = NodePath("../ItemPos1")
item_pos_2 = NodePath("../ItemPos2")
item_pos_3 = NodePath("../ItemPos3")
item_pos_4 = NodePath("../ItemPos4")
live_bullet_pos = NodePath("LiveBulletPos")
blank_bullet_pos = NodePath("BlankBulletPos")
player_turn_light = NodePath("../environment/player_turn_indicator")
enemy_turn_light = NodePath("../environment/enemy_turn_indicator")

[node name="Camera3D" type="Camera3D" parent="player"]
transform = Transform3D(-0.000203653, -0.0998334, 0.995004, 0, 0.995004, 0.0998334, -1, 2.03314e-05, -0.000202636, 0, 0, 0)

[node name="AudioListener3D" type="AudioListener3D" parent="player/Camera3D"]
current = true

[node name="Control" type="Control" parent="player"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
metadata/_edit_use_anchors_ = true

[node name="HBoxContainer" type="HBoxContainer" parent="player/Control"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="VBoxContainer" type="VBoxContainer" parent="player/Control/HBoxContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="player/Control/HBoxContainer/VBoxContainer"]
layout_mode = 2
text = "Test"
label_settings = SubResource("LabelSettings_iww2h")

[node name="Label2" type="Label" parent="player/Control/HBoxContainer/VBoxContainer"]
layout_mode = 2
text = "Test"
label_settings = SubResource("LabelSettings_iww2h")

[node name="Label3" type="Label" parent="player/Control/HBoxContainer/VBoxContainer"]
layout_mode = 2
text = "Test"
label_settings = SubResource("LabelSettings_iww2h")

[node name="Label4" type="Label" parent="player/Control/HBoxContainer/VBoxContainer"]
layout_mode = 2
text = "Test"
label_settings = SubResource("LabelSettings_iww2h")

[node name="HeldItemPos" type="Node3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.85879, -0.505, 0)

[node name="LiveBulletPos" type="Node3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.85879, -1.09609, 1.75927)

[node name="BlankBulletPos" type="Node3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.859, -1.096, -1.759)

[node name="shotgun_basic" parent="player" groups=["gun"] instance=ExtResource("4_u86ou")]
transform = Transform3D(-4.1572e-08, -0.951057, -0.309017, 1, -4.37114e-08, 0, -1.35076e-08, -0.309017, 0.951057, -1.88322, -1.03899, 0)

[node name="ShootPlayerPos" type="Node3D" parent="player"]
transform = Transform3D(-1.70542e-08, -0.943228, 0.332145, -4.10711e-08, 0.332145, 0.943228, -1, 2.44449e-09, -4.44039e-08, -0.238717, -0.551603, 0)

[node name="ShootEnemyPos" type="Node3D" parent="player"]
transform = Transform3D(9.61455e-08, 0.904187, -0.427137, 6.60682e-08, 0.427137, 0.904187, 1, -1.15154e-07, -1.86707e-08, -3.36363, -0.46249, 0.00628603)

[node name="ItemPos1" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.785526, -0.52749, 1.0555)

[node name="ItemPos2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.786, -0.527, 0.576393)

[node name="ItemPos3" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.786, -0.527, -0.576)

[node name="ItemPos4" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.786, -0.527, -1.056)

[node name="enemy" parent="." instance=ExtResource("4_hgh7a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.34313, 0.569011, 0)
